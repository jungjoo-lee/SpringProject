<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.spring.project.mappers.GoodsDAO">	
	<select id="listGoods" parameterType="hashmap" resultType="com.spring.project.vo.GoodsVO">
		select * from 
			(select rownum rn, a.* from
				(select *
				from goods_tbl
				<!-- <if test="searchType != null and searchType != ''">
					<choose>
						<when test="searchType == 'userid'">where userid LIKE '%'|| #{keyword} || '%'</when>
						<when test="searchType == 'name1'">where name LIKE '%'|| #{keyword} || '%'</when>
						<when test="searchType == 'sex'">where sex LIKE '%'|| #{keyword} || '%'</when>
						<when test="searchType == 'phone'">where phone LIKE '%'|| #{keyword} || '%'</when>
						<when test="searchType == 'address'">where address LIKE '%'|| #{keyword} || '%'</when>
						<when test="searchType == 'logincheck'">where login_check LIKE '%'|| #{keyword} || '%'</when>
					</choose>
				</if> -->
				order by regidate)a
			order by rn desc)
		<![CDATA[where rn > #{pageVO.total} - (#{pageVO.currentPage} * #{pageVO.amount}) and rn <= #{pageVO.total} - ((#{pageVO.currentPage} - 1) * #{pageVO.amount})]]>
	</select>
	
	<select id="totalGoods" resultType="int">
		select count(*) from goods_tbl
		<!-- <if test="searchType != null and searchType != ''">
			<choose>
				<when test="searchType == 'userid'">where userid LIKE '%'|| #{keyword} || '%'</when>
				<when test="searchType == 'name1'">where name LIKE '%'|| #{keyword} || '%'</when>
				<when test="searchType == 'sex'">where sex LIKE '%'|| #{keyword} || '%'</when>
				<when test="searchType == 'phone'">where phone LIKE '%'|| #{keyword} || '%'</when>
				<when test="searchType == 'address'">where address LIKE '%'|| #{keyword} || '%'</when>
				<when test="searchType == 'logincheck'">where login_check LIKE '%'|| #{keyword} || '%'</when>
			</choose>
		</if> -->
	</select>
</mapper>