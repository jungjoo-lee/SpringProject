<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.spring.project.mappers.UserDAO">	
	<select id="listUsers" resultType="com.spring.project.vo.UserVO">
		select * from 
			(select rownum rn, a.* from
				(select *
				from member
				order by regidate)a
			order by rn desc)
		<![CDATA[where rn > #{total} - (#{currentPage} * #{amount}) and rn <= #{total} - ((#{currentPage} - 1) * #{amount})]]>
	</select>
	
	<select id="totalUsers" resultType="int">
		select count(*) from member
	</select>
	
	<select id="findByID" resultType="com.spring.project.vo.UserVO">
		select * from member where userid = #{userid}
	</select>
	
	<insert id="register">
		insert into member(userid, pwd, name, sex, phone, address) values (#{userid}, #{pwd}, #{name}, #{sex}, #{phone}, #{address})
	</insert>
	
	<select id="findId" resultType="String">
		select userid from member where name = #{name} and phone = #{phone}
	</select>
	
	<select id="findPw" resultType="com.spring.project.vo.UserVO">
		select * from member where userid = #{userid} and name = #{name} and phone = #{phone}
	</select>
	
	<update id="updatePw">
		update member set pwd = #{pwd} where userid = #{userid}
	</update>
</mapper>